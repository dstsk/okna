"use strict";sal({threshold:.2}),new LazyLoad;const phoneBanner=document.getElementById("phone-banner"),phoneMeasure=document.getElementById("phone-popup-measure"),phoneCalc=document.getElementById("phone-popup-calc"),phoneMaskOptions={mask:"+7 (000) 000-00-00"},phoneBannerMask=IMask(phoneBanner,phoneMaskOptions),phoneMeasureMask=IMask(phoneMeasure,phoneMaskOptions),phoneCalcMask=IMask(phoneCalc,phoneMaskOptions),body=document.querySelector("body"),logo=document.querySelector(".logo"),menu=document.querySelector(".menu"),menuItems=document.querySelectorAll(".menu__item--link"),burgerBtn=document.querySelector(".header__btn-menu"),services=document.getElementById("services"),products=document.getElementById("products"),about=document.getElementById("about"),portfolio=document.getElementById("portfolio"),faq=document.getElementById("faq"),contacts=document.getElementById("contacts"),getCoords=e=>e.getBoundingClientRect().top+window.pageYOffset,swiperStandard=(burgerBtn.addEventListener("click",e=>{body.classList.toggle("lock"),menu.classList.toggle("active"),burgerBtn.classList.toggle("active")}),menu.addEventListener("click",e=>{e.preventDefault();const t=e.target;var o;t.classList.contains("menu-link")&&(menu.classList.remove("active"),body.classList.remove("lock"),burgerBtn.classList.remove("active"),e=document.getElementById(t.getAttribute("href").slice(1)),o=parseInt(window.getComputedStyle(e.previousElementSibling).marginBottom),console.log(o),e=getCoords(e)-o-50,window.scrollTo({top:e,behavior:"smooth"}))}),logo.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),new Swiper(".swiper-standard",swiperProps("s"))),swiperBusiness=new Swiper(".swiper-business",swiperProps("b")),swiperPremium=new Swiper(".swiper-premium",swiperProps("p")),swiperExclusive=new Swiper(".swiper-exclusive",swiperProps("e")),swiperReviews=new Swiper(".swiper-reviews",swiperProps("r")),swiperPortfolioItem1=new Swiper(".swiper-portfolio-item-1",swiperPortfolioItems("1")),swiperPortfolioItem2=new Swiper(".swiper-portfolio-item-2",swiperPortfolioItems("2")),swiperPortfolioItem3=new Swiper(".swiper-portfolio-item-3",swiperPortfolioItems("3")),swiperPortfolioItem4=new Swiper(".swiper-portfolio-item-4",swiperPortfolioItems("4")),swiperPortfolioItem5=new Swiper(".swiper-portfolio-item-5",swiperPortfolioItems("5")),swiperPortfolioItem6=new Swiper(".swiper-portfolio-item-6",swiperPortfolioItems("6")),swiperPortfolioItem7=new Swiper(".swiper-portfolio-item-7",swiperPortfolioItems("7")),swiperPortfolioItem8=new Swiper(".swiper-portfolio-item-8",swiperPortfolioItems("8")),swiperPortfolioItem9=new Swiper(".swiper-portfolio-item-9",swiperPortfolioItems("9")),swiperPortfolioItem10=new Swiper(".swiper-portfolio-item-10",swiperPortfolioItems("10")),swiperPortfolioItem11=new Swiper(".swiper-portfolio-item-11",swiperPortfolioItems("11")),swiperPortfolioItem12=new Swiper(".swiper-portfolio-item-12",swiperPortfolioItems("12"));function swiperProps(e,t=1,o=1){return{autoHeight:!0,slidesPerView:t,spaceBetween:o,navigation:{nextEl:".swiper-button-next-"+e,prevEl:".swiper-button-prev-"+e,disabledClass:"swiper-button-disabled-"+e}}}function swiperPortfolioItems(e){return{pagination:{el:".swiper-pagination-"+e,type:"bullets"}}}const swiperSertificates=new Swiper(".swiper-sertificates",{autoHeight:!0,slidesPerView:1,spaceBetween:25,navigation:{nextEl:".swiper-button-next-sert",prevEl:".swiper-button-prev-sert",disabledClass:"swiper-button-disabled-sert"},breakpoints:{680:{slidesPerView:2},1020:{slidesPerView:3},1240:{slidesPerView:5}}}),swiperPortfolio=new Swiper(".swiper-portfolio",{autoHeight:!0,slidesPerView:1,spaceBetween:0,navigation:{nextEl:".swiper-button-next-port",prevEl:".swiper-button-prev-port",disabledClass:"swiper-button-disabled-port"},breakpoints:{865:{slidesPerView:2},1020:{slidesPerView:3},1240:{slidesPerView:4}}}),productsNav=document.querySelector(".products__nav"),productsSliderBoxes=[...document.querySelectorAll(".products__slider-box")],productsNavButtons=[...document.querySelectorAll(".products__nav-item")],aboutNav=(productsSliderBoxes.forEach((e,t)=>{0<!t||(e.classList.add("products__slider-box--active"),setTimeout(()=>e.classList.remove("products__slider-box--active"),200))}),productsNav.addEventListener("click",function(e){if(e.preventDefault(),e.target.classList.contains("products__nav-item")){const t=e.target,o=t.dataset.filter,r=productsSliderBoxes.find(e=>e.dataset.attr===o);productsSliderBoxes.forEach(e=>e.classList.remove("products__slider-box--active")),productsNavButtons.forEach(e=>e.classList.remove("products__nav-item--active")),r.classList.add("products__slider-box--active"),t.classList.add("products__nav-item--active")}}),document.querySelector(".about__nav")),aboutSliderBoxes=[...document.querySelectorAll(".about__slider-box")],aboutNavButtons=[...document.querySelectorAll(".about__nav-item")],popups=(aboutSliderBoxes.forEach((e,t)=>{0<!t||(e.classList.add("about__slider-box--active"),setTimeout(()=>e.classList.remove("about__slider-box--active"),200))}),aboutNav.addEventListener("click",function(e){if(e.preventDefault(),e.target.classList.contains("about__nav-item")){const t=e.target,o=t.dataset.filter,r=aboutSliderBoxes.find(e=>e.dataset.attr===o);aboutSliderBoxes.forEach(e=>e.classList.remove("about__slider-box--active")),aboutNavButtons.forEach(e=>e.classList.remove("about__nav-item--active")),r.classList.add("about__slider-box--active"),t.classList.add("about__nav-item--active")}}),document.querySelectorAll(".popup")),closeBtns=document.querySelectorAll(".popup__close-btn"),btnsMeasure=document.querySelectorAll(".btn-measure"),btnsCalc=document.querySelectorAll(".btn-calc"),btnVideoPlay=document.querySelector(".about__description-play"),servicesTiles=document.querySelector(".services__tiles"),servicesPopups=document.querySelectorAll(".popup__services"),reviewBtn=document.querySelector(".about__reviews-button"),overlay=document.querySelector(".overlay"),video=document.querySelector(".popup__video"),createIframe=function(e){const t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.setAttribute("allow","autoplay; encrypted-media"),t.setAttribute("src",e),t},stopVideo=()=>{const t=document.querySelectorAll("iframe");for(let e=0;e<t.length;e++){var o;null!==t[e]&&(o=t[e].src,t[e].src=o)}},closeModal=()=>{popups.forEach(e=>e.classList.add("hidden-popup")),overlay.classList.add("hidden-popup"),menu.classList.contains("active")||(body.classList.remove("lock"),menu.classList.remove("active"),stopVideo())},openModal=e=>{document.querySelector(e).classList.remove("hidden-popup"),overlay.classList.remove("hidden-popup"),body.classList.add("lock")},mapRender=(btnsMeasure.forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),openModal(".popup__measure")})),btnsCalc.forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),openModal(".popup__calc")})),btnVideoPlay.addEventListener("click",e=>{e.preventDefault();e=video.getAttribute("data-video-url"),e=createIframe(e);video.innerHTML="",video.appendChild(e),console.log(e),openModal(".popup__video")}),closeBtns.forEach(e=>e.addEventListener("click",closeModal)),overlay.addEventListener("click",e=>{const t=e.target;t.classList.contains("overlay")&&closeModal()}),document.addEventListener("keydown",e=>{"Escape"!==e.key||popups.forEach(e=>e.classList.contains("hidden-popup"))||closeModal()}),servicesTiles.addEventListener("click",e=>{e.preventDefault();e=e.target.closest(".services__item");e&&openModal(".popup__services--"+e.dataset.num)}),reviewBtn.addEventListener("click",e=>{e.preventDefault(),openModal(".popup__review")}),()=>{const s=L.map("map").setView([56.99795925683616,40.974],13.5),i=(L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",{maxZoom:19,attribution:"Â© OpenStreetMap"}).addTo(s),document.querySelector(".portfolio__slider-box")),[...a]=document.querySelectorAll(".portfolio__wrapper"),e=document.querySelectorAll(".portfolio__slider-item-img"),t=document.querySelectorAll(".portfolio__item-close"),o=(e.forEach(e=>e.addEventListener("click",e=>{e.preventDefault();var t=Number(e.target.dataset.lat),o=Number(e.target.dataset.lng);const r=Number(e.target.dataset.id);s.setView([t,o],15,{animate:!0,pan:{duration:1}}),a.find(e=>r===Number(e.dataset.id)).classList.add("portfolio__wrapper--active"),i.classList.add("portfolio__slider-wrapper-hidden")})),[]),r=(e.forEach(e=>{o.push([e.firstChild.dataset.lat,e.firstChild.dataset.lng])}),o.forEach((e,t)=>{L.marker(e,{icon:L.icon({iconUrl:"../images/geolocation.svg",className:"marker-"+(t+1)}),color:"red",fillColor:"#f03",fillOpacity:.5,radius:100}).addTo(s)}),t.forEach(e=>e.addEventListener("click",()=>{console.log("click"),a.forEach(e=>e.classList.remove("portfolio__wrapper--active")),i.classList.remove("portfolio__slider-wrapper-hidden"),s.setView([56.99795925683616,40.974],13.5,{animate:!0,pan:{duration:1}})})),document.querySelector(".leaflet-marker-pane"));r.addEventListener("click",t=>{if(t.preventDefault(),t.target.classList.contains("leaflet-marker-icon")){a.forEach(function(e){e.classList.remove("portfolio__wrapper--active")});const r=a.find(e=>t.target.classList.contains(e.dataset.marker));r.classList.add("portfolio__wrapper--active"),i.classList.add("portfolio__slider-wrapper-hidden"),console.log(r);var e=Number(r.dataset.lat),o=Number(r.dataset.lng);console.log(e,o),s.setView([e,o],15,{animate:!0,pan:{duration:1}})}})}),loadMap=e=>{var[e]=e;e.isIntersecting&&(console.log("MAP!!!"),mapRender(),mapObserver.unobserve(e.target))},mapOptions={root:null,threshold:0,rootMargin:"1000px"},mapObserver=new IntersectionObserver(loadMap,mapOptions),faqItemsContainer=(mapObserver.observe(portfolio),document.querySelector(".faq__items")),faqItems=document.querySelectorAll(".faq__item"),faqQuestion=document.querySelectorAll(".faq__question"),faqAnswers=document.querySelectorAll(".faq__answer"),faqArrows=document.querySelectorAll(".faq__arrow");faqItemsContainer.addEventListener("click",e=>{const t=e.target.closest(".faq__item");t&&(t.classList.contains("faq__item--active")?(faqItems.forEach(e=>e.classList.remove("faq__item--active")),faqQuestion.forEach(e=>e.classList.remove("faq__question--active")),faqAnswers.forEach(e=>e.classList.remove("faq__answer--active")),faqArrows.forEach(e=>e.classList.remove("faq__arrow--active"))):(faqItems.forEach(e=>e.classList.remove("faq__item--active")),faqQuestion.forEach(e=>e.classList.remove("faq__question--active")),faqAnswers.forEach(e=>e.classList.remove("faq__answer--active")),faqArrows.forEach(e=>e.classList.remove("faq__arrow--active")),t.classList.add("faq__item--active"),t.querySelector(".faq__question").classList.add("faq__question--active"),t.querySelector(".faq__answer").classList.add("faq__answer--active"),t.querySelector(".faq__arrow").classList.add("faq__arrow--active")))});